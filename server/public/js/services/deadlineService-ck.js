/*global todomvc */var deadlineService=function(e){return{get:function(t){e({method:"GET",url:"http://127.0.0.1:4567/deadlines"}).success(function(e,n,r,i){for(var s in e){var o=e[s],u=Date.parse(o.due);o.due=moment(u).fromNow()+" ("+moment(u).format("DD/MM/YY HH:mm")+")";o.dueDate=u}e=_.sortBy(e,function(e){return e.dueDate});t(e)}).error(function(e,n,r,i){t([])})},post:function(t){e({method:"POST",url:"http://127.0.0.1:4567/deadlines",data:{module:t.module.key,name:t.name,due:t.dueDate}}).success(function(e,t,n,r){console.log("Yay!")}).error(function(e,t,n,r){console.log("Nay :(")})},getModules:function(t){e({method:"GET",url:"http://127.0.0.1:4567/modules"}).success(function(e,n,r,i){t(e)}).error(function(e,n,r,i){t([])})}}};todomvc.factory("deadlineService",["$http",deadlineService]);